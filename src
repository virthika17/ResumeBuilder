// Package is optional; remove the next line if you don't want packages
// package com.yourname.resumepro;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Font;
import com.itextpdf.text.FontFactory;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;

import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

public class Main extends JFrame {

    private JTextField tfName, tfEmail, tfPhone;
    private JTextArea taSummary, taEducation, taSkills, taExperience;

    public Main() {
        setTitle("Resume Pro");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(720, 680);
        setLocationRelativeTo(null);

        JPanel root = new JPanel(new BorderLayout());
        root.setBorder(new EmptyBorder(12, 12, 12, 12));
        setContentPane(root);

        JLabel title = new JLabel("Resume Pro â€“ Java Swing + iText", SwingConstants.CENTER);
        title.setFont(title.getFont().deriveFont(Font.BOLD, 18f));
        root.add(title, BorderLayout.NORTH);

        JPanel form = new JPanel();
        form.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        c.insets = new Insets(6, 6, 6, 6);
        c.fill = GridBagConstraints.HORIZONTAL;
        c.gridx = 0; c.gridy = 0;

        tfName = new JTextField();
        tfEmail = new JTextField();
        tfPhone = new JTextField();

        taSummary = new JTextArea(3, 30);
        taEducation = new JTextArea(6, 30);
        taSkills = new JTextArea(4, 30);
        taExperience = new JTextArea(6, 30);

        addRow(form, c, "Full Name", tfName);
        addRow(form, c, "Email", tfEmail);
        addRow(form, c, "Phone", tfPhone);
        addRow(form, c, "Professional Summary", new JScrollPane(taSummary));
        addRow(form, c, "Education", new JScrollPane(taEducation));
        addRow(form, c, "Skills (comma-separated or bullets)", new JScrollPane(taSkills));
        addRow(form, c, "Experience", new JScrollPane(taExperience));

        root.add(form, BorderLayout.CENTER);

        JButton btnGenerate = new JButton("Generate PDF");
        btnGenerate.addActionListener(e -> onGenerate());
        JPanel bottom = new JPanel(new FlowLayout(FlowLayout.RIGHT));
        bottom.add(btnGenerate);
        root.add(bottom, BorderLayout.SOUTH);
    }

    private void addRow(JPanel panel, GridBagConstraints c, String label, Component field) {
        c.gridx = 0;
        JLabel l = new JLabel(label);
        panel.add(l, c);
        c.gridx = 1;
        c.weightx = 1.0;
        panel.add(field, c);
        c.gridy++;
    }

    private void onGenerate() {
        String name = tfName.getText().trim();
        String email = tfEmail.getText().trim();
        String phone = tfPhone.getText().trim();
        String summary = taSummary.getText().trim();
        String education = taEducation.getText().trim();
        String skills = taSkills.getText().trim();
        String experience = taExperience.getText().trim();

        if (name.isEmpty()) {
            JOptionPane.showMessageDialog(this, "Please enter your name.", "Missing field", JOptionPane.WARNING_MESSAGE);
            return;
        }

        JFileChooser chooser = new JFileChooser();
        chooser.setSelectedFile(new File("resume.pdf"));
        int res = chooser.showSaveDialog(this);
        if (res != JFileChooser.APPROVE_OPTION) return;

        File out = chooser.getSelectedFile();
        if (!out.getName().toLowerCase().endsWith(".pdf")) {
            out = new File(out.getParentFile(), out.getName() + ".pdf");
        }

        try {
            generatePdf(out, name, email, phone, summary, education, skills, experience);
            JOptionPane.showMessageDialog(this, "PDF generated:\n" + out.getAbsolutePath(), "Success", JOptionPane.INFORMATION_MESSAGE);
        } catch (Exception ex) {
            ex.printStackTrace();
            JOptionPane.showMessageDialog(this, "Failed to generate PDF:\n" + ex.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    private void generatePdf(File file,
                             String name, String email, String phone,
                             String summary, String education, String skills, String experience)
            throws IOException, DocumentException {

        Document doc = new Document();
        PdfWriter.getInstance(doc, new FileOutputStream(file));
        doc.open();

        Font h1 = FontFactory.getFont(FontFactory.HELVETICA_BOLD, 18);
        Font h2 = FontFactory.getFont(FontFactory.HELVETICA_BOLD, 13);
        Font body = FontFactory.getFont(FontFactory.HELVETICA, 11);

        doc.add(new Paragraph(name, h1));
        doc.add(new Paragraph(email + " | " + phone, body));
        doc.add(new Paragraph("\n"));

        if (!summary.isEmpty()) {
            doc.add(new Paragraph("Professional Summary", h2));
            doc.add(new Paragraph(summary, body));
            doc.add(new Paragraph("\n"));
        }

        if (!education.isEmpty()) {
            doc.add(new Paragraph("Education", h2));
            doc.add(new Paragraph(education, body));
            doc.add(new Paragraph("\n"));
        }

        if (!skills.isEmpty()) {
            doc.add(new Paragraph("Skills", h2));
            doc.add(new Paragraph(skills, body));
            doc.add(new Paragraph("\n"));
        }

        if (!experience.isEmpty()) {
            doc.add(new Paragraph("Experience", h2));
            doc.add(new Paragraph(experience, body));
        }

        doc.close();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> new Main().setVisible(true));
    }
}

